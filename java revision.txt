const fs = require('fs');
const { dereference } = require('json-schema-ref-parser');

// Read the input schema file
const inputFilePath = 'schema.json';
const schema = JSON.parse(fs.readFileSync(inputFilePath, 'utf8'));

// Resolve JSON references
dereference(schema)
  .then(resolvedSchema => {
    // Write the resolved schema to the output file
    const outputFilePath = 'output.json';
    fs.writeFileSync(outputFilePath, JSON.stringify(resolvedSchema, null, 2));

    console.log('Schema references resolved and saved to output.json');
  })
  .catch(err => {
    console.error('Error resolving schema references:', err);
  });