import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.google.protobuf.util.JsonFormat;
import com.google.protobuf.util.JsonFormat.Printer;
import io.protostuff.json.JsonSchema;
import io.protostuff.json.JsonSchemaLoader;

import java.io.File;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Paths;

public class JsonToProtoConverter {
    public static void main(String[] args) throws IOException {
        // Path to the JSON schema file
        String jsonSchemaFilePath = "/path/to/schema.json";

        // Load JSON schema
        String jsonSchema = new String(Files.readAllBytes(Paths.get(jsonSchemaFilePath)));

        // Parse JSON schema
        ObjectMapper objectMapper = new ObjectMapper();
        JsonNode rootNode = objectMapper.readTree(jsonSchema);
        JsonSchema schema = JsonSchemaLoader.load(rootNode);

        // Convert JSON schema to .proto file
        String protoFileContent = schema.toProtoFile();

        // Save the .proto file
        String protoFilePath = "/path/to/output.proto";
        Files.write(Paths.get(protoFilePath), protoFileContent.getBytes());

        System.out.println("Conversion completed. The .proto file is saved at: " + protoFilePath);
    }
}